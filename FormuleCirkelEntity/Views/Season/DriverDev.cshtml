@model IEnumerable<FormuleCirkelEntity.Models.SeasonDriver>

@{
    ViewData["Title"] = "Driver development";
}

<h1>Coureur ontwikkeling</h1>

<section>

    <input id="min" type="number" placeholder="Min. RNG"/>
    <input id="max" type="number" placeholder="Max. RNG"/>
    <button id="develop" class="btn btn-dark">Ontwikkel</button>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Naam</th>
                <th>Team</th>
                <th>Oud</th>
                <th>Verschil</th>
                <th>Nieuw</th>
            </tr>
        </thead>
        <tbody id="devtable">
            @{
                foreach (var driver in Model)
                {
                    <tr>
                        <td><span class="badge">@driver.Driver.DriverNumber</span> @driver.Driver.Name</td>
                        <td class="badge" style="background-color:@(driver.SeasonTeam.Team.Colour);
                            color:@(driver.SeasonTeam.Team.Accent);font-size:1rem;display:table-cell;">
                            @driver.SeasonTeam.Team.Abbreviation
                        </td>
                        <td>@driver.Skill</td>
                        <td>?</td>
                        <td>?</td>
                    </tr>
                }
            }
        </tbody>
    </table>
    <button class="btn btn-dark">Opslaan</button>
</section>

<script>
    $(document).ready(function () {
        $('#develop').click(function () {
            $.ajax({
                url: "/Season/Development",
                type: "GET",
                data: {
                    min: document.getElementById("min").value,
                    max: document.getElementById("max").value,
                    source: "driver"
                },
                success: function (drivers) {
                    $("#devtable").empty();
                    $.each(drivers, function (index, driver) {
                        var row = "<tr><td><span class='badge'>" + driver.number + "</span>" + driver.name +
                            "</td><td class='badge' style='background-color:" + driver.colour + ";color:" + driver.accent +
                            ";font-size:1rem;display:table-cell;'>" + driver.abbreviation + "</td><td>" + driver.old + "</td><td>"
                            + driver.dev + "</td><td id='new'>" + driver.new + "</td><td id='id' style='display:none;'>" + driver.id + "</td></tr>";
                        $("#devtable").append(row);
                    });
                }
            });
        });
    });
</script>